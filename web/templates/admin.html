{{define "content"}}
<div class="container pt-5 mb-5">
        <div class="d-flex flex-wrap" id="top_buttons">
            <form action="/menu" method="GET" class="me-3 mb-3">
                <button id="view_menu" class="btn btn-primary">View Menu</button>
            </form>
            <form action="/admin/dish" method="GET" class="me-3 mb-3">
                <button id="add_dish" class="btn btn-primary">Add Dish</button>
            </form>
            <!-- <form action="/admin/add_category" method="GET" class="me-3 mb-3">
                <button id="add_category" class="btn btn-primary">Add Category</button>
            </form> -->
        </div>

        <h3 class="text-center mb-4">Manage Orders</h3>
        <div class="d-flex justify-content-center mb-4 flex-wrap gap-2">
            <button class="btn btn-outline-primary filter-btn order_buttons active" data-status="all">All</button>
            <button class="btn btn-outline-warning filter-btn order_buttons" data-status="preparing">Preparing</button>
            <button class="btn btn-outline-danger filter-btn order_buttons" data-status="payment_pending">Payment Pending</button>
            <button class="btn btn-outline-success filter-btn order_buttons" data-status="completed">Completed</button>
        </div>
        <div class="order_table">
            <table class="table table-bordered table-hover text-center align-middle">
                <thead class="table-dark">
                    <tr>
                        <th>Status</th>
                        <th>Order ID</th>
                        <th>User ID</th>
                        <th>Order Type</th>
                        <th>Table No.</th>
                        <th>Bill</th>
                    </tr>
                </thead>
                <tbody id="orders_table_body">
                    {{range .Orders}}
                        <tr data-status="{{.Status}}">
                            <td>
                                {{if eq .Status "preparing"}}
                                    Preparing
                                {{else if eq .Status "payment_pending"}}
                                    Payment Pending
                                {{else if eq .Status "completed"}}
                                    Completed
                                {{end}}
                            </td>
                            <td>{{.OrderId}}</td>
                            <td>{{.UserId}}</td>
                            <td>
                                {{if eq .Order_type "takeaway"}}
                                    Takeaway
                                {{else}}
                                    Dine In
                                {{end}}
                            </td>
                            <td>{{if eq .Order_type "takeaway"}}
                                    -
                                {{else}}
                                    {{.Table_number}}
                                {{end}}
                            </td>
                            <td>
                                <form id="get_bill" action="/bill/preparing/{{.OrderId}}" method="GET" target="_blank">
                                    <button type="submit" class="btn btn-info btn-sm">Get Bill</button>
                                </form>
                            </td>
                        </tr>
                    {{end}}
                </tbody>
            </table>
        </div>
        <h3 class="text-center mb-4">Dishes Ordered</h3>
        <div class="d-flex justify-content-center mb-4 flex-wrap gap-2">
            <button class="btn btn-outline-primary filter-btn active item_buttons" data-chef="all">All Active</button>
            <button class="btn btn-outline-success filter-btn item_buttons" data-chef="unassigned">Unassigned</button>
            <button class="btn btn-outline-warning filter-btn item_buttons" data-chef="assigned">Assigned</button>
        </div>
        <div class="item_table">
            <table class="table table-bordered table-hover text-center align-middle">
                <thead class="table-dark">
                    <tr>
                        <th>Item Name</th>
                        <th>Quantity</th>
                        <th>Order Id</th>
                        <th>Instructions</th>
                        <th>Chef</th>
                    </tr>
                </thead>
                <tbody id="items_table_body">
                    {{range .Items}}
                        <tr data-chef_id="{{.ChefId}}">
                            <td>{{.ItemName}}</td>
                            <td>{{.Quantity}}</td>
                            <td>{{.OrderId}}</td>
                            <td id="instructions">{{.Instructions}}</td>
                            <td>{{if .Assigned}}
                                    {{.ChefName}}
                                {{else}}
                                    Unassigned
                                {{end}}
                            </td>
                        </tr>
                    {{end}}
                </tbody>
            </table>
        </div>
    </div>
    <div class="container mb-5">
        <h3 class="text-center mb-4">Pending Approvals</h3>
        <div class="approval_table">
            <table class="table table-bordered table-hover text-center align-middle">
                <thead class="table-dark">
                    <tr>
                        <th>User ID</th>
                        <th>Name</th>
                        <th>Role</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    {{range .Uausers}}
                        <tr>
                            <td>{{.UserId}}</td>
                            <td>{{.Name}}</td>
                            <td>{{.Role}}</td>
                            <td>
                                <button class="btn btn-sm btn-success approve-btn" data-user-id="{{.UserId}}">Approve</button>
                                <button class="btn btn-sm btn-danger decline-btn" data-user-id="{{.UserId}}">Decline</button>
                            </td>
                        </tr>
                    {{end}}
                </tbody>
            </table>
        </div>
    </div>    
</div>
{{if .Show}}
    <div class="position-fixed bottom-0 end-0 p-3" style="z-index: 9999;">
        <div class="toast custom-toast show" role="alert" aria-live="assertive" aria-atomic="true">
            <div class="d-flex">
                <div class="toast-body">
                    {{.Message}}
                </div>
                <button type="button" class="btn-close btn-close-black me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
            </div>
        </div>
    </div>
{{end}}
{{end}}